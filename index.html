<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Tron‑Style Light‑Cycle</title>
  <style>
    body { margin: 0; overflow: hidden; }
    canvas { display: block; }
  </style>
</head>
<body>
<script type="module">
  import * as THREE                 from 'https://cdn.jsdelivr.net/npm/three@0.158.0/build/three.module.js';
  import { OrbitControls }          from 'https://cdn.jsdelivr.net/npm/three@0.158.0/examples/jsm/controls/OrbitControls.js';
  import { EffectComposer }         from 'https://cdn.jsdelivr.net/npm/three@0.158.0/examples/jsm/postprocessing/EffectComposer.js';
  import { RenderPass }             from 'https://cdn.jsdelivr.net/npm/three@0.158.0/examples/jsm/postprocessing/RenderPass.js';
  import { UnrealBloomPass }        from 'https://cdn.jsdelivr.net/npm/three@0.158.0/examples/jsm/postprocessing/UnrealBloomPass.js';

  //--- 1) SCENE & RENDERER ---
  const scene    = new THREE.Scene();
  scene.background = new THREE.Color(0x000011);    // pure black‑blue

  const camera   = new THREE.PerspectiveCamera(45, innerWidth/innerHeight, 0.1, 1000);
  camera.position.set(0, 5, 15);
  camera.lookAt(0, 1, 0);

  const renderer = new THREE.WebGLRenderer({ antialias: true });
  renderer.setPixelRatio(window.devicePixelRatio);
  renderer.setSize(innerWidth, innerHeight);
  document.body.appendChild(renderer.domElement);

  //--- 2) CONTROLS ---
  const controls = new OrbitControls(camera, renderer.domElement);
  controls.enableDamping = true;

  //--- 3) LIGHTING ---
  // Fill light
  const hemi = new THREE.HemisphereLight(0x8888ff, 0x000022, 0.4);
  scene.add(hemi);

  // Key lights
  const key1 = new THREE.PointLight(0xffffff, 1.2, 50);
  key1.position.set(10, 10, 10);
  scene.add(key1);

  const key2 = new THREE.PointLight(0xffffff, 0.8, 50);
  key2.position.set(-10, 5, -10);
  scene.add(key2);

  //--- 4) WHEELS ---
  const wheelGeo = new THREE.TorusGeometry(4, 0.5, 16, 100);
  const wheelMat = new THREE.MeshStandardMaterial({
    color: 0x333333,    // light gray so it shows up
    metalness: 1,
    roughness: 0.3
  });
  [-5, 5].forEach(x => {
    const w = new THREE.Mesh(wheelGeo, wheelMat);
    w.rotation.x = Math.PI / 2;
    w.position.x = x;
    w.position.y = 1;   // lift up to match body height
    scene.add(w);
  });

  //--- 5) BODY ---
  const side = new THREE.Shape()
    .moveTo(-5, 0)
    .lineTo(-2, 3)
    .bezierCurveTo(0, 4, 3, 4, 5, 3)
    .lineTo(5, 2)
    .lineTo(-5, 2)
    .closePath();

  const extrudeOpts = { depth: 1, bevelEnabled: false };
  const bodyGeo = new THREE.ExtrudeGeometry(side, extrudeOpts);
  const bodyMat = new THREE.MeshStandardMaterial({
    color: 0x222222,    // dark but visible
    metalness: 0.8,
    roughness: 0.4,
    clearcoat: 1,
    clearcoatRoughness: 0.1
  });
  const body = new THREE.Mesh(bodyGeo, bodyMat);
  body.rotation.y = Math.PI;
  body.position.y = 1;
  scene.add(body);

  //--- 6) NEON STRIPES ---
  const stripe = new THREE.Shape()
    .moveTo(-5, 1.9)
    .lineTo(5, 1.9)
    .lineTo(5, 1.8)
    .lineTo(-5, 1.8)
    .closePath();

  const stripeGeo = new THREE.ExtrudeGeometry(stripe, extrudeOpts);
  const stripeMat = new THREE.MeshBasicMaterial({
    color: 0xffff00,
    emissive: 0xffff00,
    emissiveIntensity: 2
  });
  const stripeMesh = new THREE.Mesh(stripeGeo, stripeMat);
  stripeMesh.rotation.y = Math.PI;
  stripeMesh.position.y = 1;
  scene.add(stripeMesh);

  //--- 7) BLOOM POSTPROCESSING ---
  const composer = new EffectComposer(renderer);
  composer.setSize(innerWidth, innerHeight);
  composer.addPass(new RenderPass(scene, camera));
  composer.addPass(new UnrealBloomPass(
    new THREE.Vector2(innerWidth, innerHeight),
    1.0, // strength
    0.3, // radius
    0.9  // threshold
  ));

  //--- 8) RESIZE HANDLER ---
  window.addEventListener('resize', () => {
    camera.aspect = window.innerWidth / window.innerHeight;
    camera.updateProjectionMatrix();
    renderer.setSize(window.innerWidth, window.innerHeight);
    composer.setSize(window.innerWidth, window.innerHeight);
  });

  //--- 9) ANIMATION LOOP ---
  function animate() {
    requestAnimationFrame(animate);
    controls.update();
    composer.render();
  }
  animate();
</script>
</body>
</html>
